<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Slots</title>
</head>
<body>
<h1>User Time Slots</h1>
<input type="email" id="email" placeholder="Enter email" />
<button onclick="fetchTimeSlots()">Get Time Slots</button>
<div id="results"></div>

<script>
  async function fetchTimeSlots() {
    const email = document.getElementById('email').value;

    try {
      const response = await fetch(`/api/user/timeslots?email=${encodeURIComponent(email)}`);
      const data = await response.json();

      if (data.second) {
        // Success case
        const timeSlots = data.third;
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '<h3>Time Slots:</h3>';
        timeSlots.forEach(slot => {
          const slotDiv = document.createElement('div');
          slotDiv.innerHTML = `
                            <p>Start Time: ${slot.startTime}</p>
                            <p>End Time: ${slot.endTime}</p>
                            <p>Availability: ${slot.availability}</p>
                            <hr>
                        `;
          resultsDiv.appendChild(slotDiv);
        });
      } else {
        // Error case
        alert(`Error: ${data.first}`);
      }
    } catch (error) {
      console.error('Error fetching time slots:', error);
      alert('An unexpected error occurred.');
    }
  }
</script>
</body>
</html>